<!DOCTYPE html>
<html lang="en">
 <head>
	<meta http-equiv="Cache-Control" content="no-cache" />
	<meta http-equiv="Expires" content="-1" />
	<title>Amazon Chime Web SDK</title>
	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet" />
     <style>
	.container {
		border: 2px solid #dedede;
		background-color: #f1f1f1;
		border-radius: 5px;
		padding: 10px;
		margin: 10px 0;
	}
	.darker {
    border-color: #86D1D7;
    /*border-color: #FF0000;*/
    background-color: #EEF8F9;
	}
	#main-tab {
		display: none;
	}
	#loading-div {
		display: block;
	}
	</style>
 </head>
 <body>
	<div id="loading-div">
		<img src="Loading_icon.gif" />
	</div>
	<div id="login-div" style="display:none">
		<button id="login-button" class="btn btn-primary" onclick="login()"> Click here to login to Amazon Chime </button>
	</div>
	<div id="contacts-div" style="display:none">
		<label for="contacts-select">Select an issue to chat about</label>
		<select class="form-control" id="contact-select">
			<option>Select</option>
      </select>
	  <br />
	  <button id="chat-button" class="btn btn-primary" onclick="createConversation()">Start Conversation</div>
	</div>
	<div id="chat-div" style="display:none">
		<a id="logout-link" href="#" onclick="logout()">Logout</a>
		<div id="message-div" style="max-height:200px;overflow-y:scroll;">
		</div>
		<input id="message-text" type="text" onkeyup="createConversationMsg(event)" class="form-control" placeholder="Type a new message then press Enter"></input>
		<br />
		<button id="back-button" class="btn btn-primary" onclick="backToContacts()"> << Back to contacts </button>
	</div>
	
    <script id="connect-loader">
         (function() {
             var getUrlParam = function (param) {
                 var codedParam = (new RegExp(param + '=([^&]*)')).exec(window.location.search)[1];
                 return decodeURIComponent(codedParam);
             };

             var baseUrl = getUrlParam('xdm_e') + getUrlParam('cp');
             var options = document.getElementById('connect-loader').getAttribute('data-options');

             var script = document.createElement("script");
             script.src = baseUrl + '/atlassian-connect/all.js';

             if(options) {
                 script.setAttribute('data-options', options);
             }

             document.getElementsByTagName("head")[0].appendChild(script);
         })();
    </script>
	
	<script src="https://g.app.chime.aws/embed/sdk-0.1.2.js"></script>
	<script src="index.js"></script>
 </body>
</html>
